<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Katriona Goldmann" />


<title>Building a Shiny App</title>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="fluid-row" id="section-header">



<h1 class="title toc-ignore">Building a Shiny App</h1>
<h4 class="author">Katriona Goldmann</h4>

</div>


<p><img src="../logo.png" align="right" alt="" width="200" /></p>
<ul>
<li><a href="#section-introduction">Introduction</a>
<ul>
<li><a href="#section-getting-started">Getting Started</a>
<ul>
<li><a href="#section-install-shiny">Install Shiny</a></li>
<li><a href="#section-install-volcano3d">Install volcano3D</a></li>
</ul></li>
</ul></li>
<li><a href="#section-creating-the-shiny-app">Creating the shiny app</a>
<ul>
<li><a href="#section-describe-how-to-create-the-shiny-app-in-general---the-general-structure">Describe how to create the shiny app in general - the general structure</a>
<ul>
<li><a href="#section-structure-of-a-shiny-app">Structure of a Shiny App</a></li>
<li><a href="#section-basic-example">Basic Example</a></li>
</ul></li>
<li><a href="#section-describe-the-volcano3d-tab-(specific-bit-to-this-package)">Describe the volcano3D tab (specific bit to this package)</a></li>
<li><a href="#section-deploying-shiny-apps">Deploying shiny apps</a></li>
</ul></li>
</ul>
<hr />
<div id="section-introduction" class="section level1">
<h1>Introduction</h1>
<p>This vignette provides an example for deploying the interactive visualisations created in the volcano3D package as <a href="https://shiny.rstudio.com">Shiny Apps</a>.</p>
<p>The purpose if this is to generate a similar tool to the web page available at <a href="https://peac.hpc.qmul.ac.uk">https://peac.hpc.qmul.ac.uk</a> which supplements the results found in <a href="https://doi.org/10.1016/j.celrep.2019.07.091">‘Lewis, Myles J., et al. “Molecular portraits of early rheumatoid arthritis identify clinical and treatment response phenotypes.” Cell reports 28.9 (2019): 2455-2470.’ (DOI: 10.1016/j.celrep.2019.07.091)</a> with an interactive web tool available at</p>
<div id="section-getting-started" class="section level2">
<h2>Getting Started</h2>
<div id="section-install-shiny" class="section level3">
<h3>Install Shiny</h3>
<pre class="r"><code>install.packages(&quot;shiny&quot;)</code></pre>
</div>
<div id="section-install-volcano3d" class="section level3">
<h3>Install volcano3D</h3>
<p>Either from CRAN <em>Not yet publicly available</em>:</p>
<pre class="r"><code>install.packages(&quot;volcano3D&quot;)</code></pre>
<p>or from Github</p>
<pre class="r"><code>library(devtools)
install_github(&quot;KatrionaGoldmann/volcano3D&quot;)</code></pre>
<pre class="r"><code>library(volcano3D)</code></pre>
<p>The sample data used in this vignette can be loaded from the <a href="https://github.com/KatrionaGoldmann/volcano3Ddata">volcano3Ddata package</a>. This is only possible after volcano3D is imported.</p>
<pre class="r"><code>install.packages(&quot;volcano3Ddata&quot;)</code></pre>
<hr />
</div>
</div>
</div>
<div id="section-creating-the-shiny-app" class="section level1">
<h1>Creating the shiny app</h1>
<div id="section-describe-how-to-create-the-shiny-app-in-general---the-general-structure" class="section level2">
<h2>1. Describe how to create the shiny app in general - the general structure</h2>
<p>Shiny is an R package that makes it easy to build interactive web applications straight from R.</p>
<div id="section-structure-of-a-shiny-app" class="section level3">
<h3>Structure of a Shiny App</h3>
<p>Shiny apps has three components:</p>
<ul>
<li><p>a user interface object</p></li>
<li><p>a server function</p></li>
<li><p>a call to the shinyApp function</p></li>
</ul>
<p>The user interface (ui) object controls the layout and appearance of your app. The server function contains the instructions that your computer needs to build your app. Finally the shinyApp function creates Shiny app objects from an explicit UI/server pair.</p>
<p>To find out more information about shiny, as well as tutorials and examples visit the <a href="https://shiny.rstudio.com/tutorial/">shiny website</a>.</p>
</div>
<div id="section-basic-example" class="section level3">
<h3>Basic Example</h3>
<p>Using the 1st example from the shiny website we can create a very basic shiny app. First building a ui:</p>
<pre class="r"><code>library(shiny)

# Define UI for app that draws a histogram ----
ui &lt;- fluidPage(
  # App title ----
  titlePanel(&quot;Hello Shiny!&quot;),

  # Sidebar layout with input and output definitions ----
  sidebarLayout(
    # Sidebar panel for inputs ----
    sidebarPanel(
      # Input: Slider for the number of bins ----
      sliderInput(&quot;bins&quot;, label = &quot;No. of bins:&quot;, min = 1, max = 50, value = 30)
    ),

    # Main panel for displaying outputs ----
    mainPanel(
      # Output: Histogram ----
      plotOutput(outputId = &quot;distPlot&quot;)
    )
  )
)</code></pre>
<p>And then building a server:</p>
<pre class="r"><code>server &lt;- function(input, output) {
  output$distPlot &lt;- renderPlot({
    x    &lt;- faithful$waiting
    bins &lt;- seq(min(x), max(x), length.out = input$bins + 1)
    hist(x, breaks = bins, col = &quot;#75AADB&quot;, border = &quot;white&quot;,
         xlab = &quot;Waiting time to next eruption (in mins)&quot;,
         main = &quot;Histogram of waiting times&quot;)
    })
}</code></pre>
<p>Then we can run the interactive app:</p>
<pre class="r"><code>#shinyApp(ui = ui, server = server)</code></pre>
<p><img src="shiny_builder_files/figure-html/unnamed-chunk-9-1.png" width="672" style="display: block; margin: auto;" /> ## 2. Describe the volcano3D tab (specific bit to this package)</p>
</div>
</div>
<div id="section-deploying-shiny-apps" class="section level2">
<h2>3. Deploying shiny apps</h2>
<ol style="list-style-type: decimal">
<li>Docker - reference links</li>
<li>server hpc - reference links</li>
</ol>

<script type="application/shiny-prerendered" data-context="server-start">
knitr::opts_chunk$set(echo = TRUE, 
                      warning = FALSE, 
                      message = FALSE, 
                      fig.height = 7, 
                      fig.width=7, 
                      fig.align = "center")
library(knitr)
library(kableExtra)
source("https://gist.githubusercontent.com/KatrionaGoldmann/3d6dfd6aa4cc5c3940bb72dc49beae02/raw/26e78c78a7a9d096d695c708e8a45830a1d1121a/render_toc.R")
</script>
 <!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.11.3"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootstrap"]},{"type":"character","attributes":{},"value":["3.3.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/bootstrap"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["viewport"]}},"value":[{"type":"character","attributes":{},"value":["width=device-width, initial-scale=1"]}]},{"type":"character","attributes":{},"value":["js/bootstrap.min.js","shim/html5shiv.min.js","shim/respond.min.js"]},{"type":"character","attributes":{},"value":["css/bootstrap.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.11.3"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["navigation"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/navigation-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tabsets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["default.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.1"]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71]}},"value":[{"type":"character","attributes":{},"value":["assertthat","base","callr","cli","colorspace","compiler","crayon","data.table","datasets","digest","dplyr","ellipsis","evaluate","fansi","fastmap","ggplot2","ggpubr","ggrepel","ggsignif","glue","graphics","grDevices","grid","gtable","hms","htmltools","htmlwidgets","httpuv","httr","jsonlite","kableExtra","knitr","later","lazyeval","lifecycle","magrittr","methods","mime","munsell","pillar","pkgconfig","plotly","processx","promises","ps","purrr","R6","Rcpp","readr","rlang","rmarkdown","rstudioapi","rvest","scales","shiny","stats","stringi","stringr","tibble","tidyr","tidyselect","tools","utils","vctrs","viridisLite","volcano3D","webshot","xfun","xml2","xtable","yaml"]},{"type":"character","attributes":{},"value":["0.2.1","3.6.1","3.4.3","2.0.2","1.4-1","3.6.1","1.3.4","1.12.8","3.6.1","0.6.25","0.8.5","0.3.0","0.14","0.4.1","1.0.1","3.3.0","0.2.5","0.8.2","0.6.0","1.3.2","3.6.1","3.6.1","3.6.1","0.3.0","0.5.3","0.4.0","1.5.1","1.5.2","1.4.1","1.6.1","1.1.0","1.28","1.0.0","0.2.2","0.2.0","1.5","3.6.1","0.9","0.5.0","1.4.3","2.0.3","4.9.2","3.4.2","1.1.0","1.3.2","0.3.3","2.4.1","1.0.4","1.3.1","0.4.5","2.1","0.11","0.3.5","1.1.0","1.4.0.2","3.6.1","1.4.6","1.4.0","3.0.0","1.0.2","1.0.0","3.6.1","3.6.1","0.2.4","0.3.0","1.0.0.9000","0.5.2","0.12","1.3.0","1.8-4","2.2.1"]}]}]}
</script>
<!--/html_preserve-->
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
